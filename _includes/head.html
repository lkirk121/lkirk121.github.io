<div class="gallery">
  {% for media in include.media %}
    <div class="gallery-item">
      <a href="#lightbox-{{ include.id }}-{{ forloop.index }}">
        {% if media.type == "image" %}
          <img src="{{ media.url }}" alt="Thumbnail for {{ media.caption }}">
        {% elsif media.type == "video" %}
          <div class="video-thumbnail">
            <img src="https://img.youtube.com/vi/{{ media.url | split: '/' | last }}/hqdefault.jpg" alt="Video thumbnail">
            <span class="video-icon">▶</span>
          </div>
        {% endif %}
      </a>
    </div>
    
    <div id="lightbox-{{ include.id }}-{{ forloop.index }}" class="lightbox">
      <div class="lightbox-content">
        {% if media.type == "image" %}
          <img src="{{ media.url }}" alt="{{ media.caption }}">
        {% elsif media.type == "video" %}
          <iframe src="{{ media.url }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        {% endif %}
        <p>{{ media.caption }}</p>

        <!-- Navigation Links -->
        {% if forloop.first == false %}
          <a href="#lightbox-{{ include.id }}-{{ forloop.index0 }}" class="lightbox-prev">❮ Previous</a>
        {% endif %}
        {% if forloop.last == false %}
          <a href="#lightbox-{{ include.id }}-{{ forloop.index | plus: 1 }}" class="lightbox-next">Next ❯</a>
        {% endif %}

        <!-- Close Button -->
        <a href="#close-{{ include.id }}" class="lightbox-close">&times;</a>
      </div>
    </div>
  {% endfor %}
</div>
